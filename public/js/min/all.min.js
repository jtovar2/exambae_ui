var exambae=angular.module("exambae",["ngAnimate","ngAria","ui.router","ui.bootstrap"]);!function(e){e.config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/"),e.state("checktransactions",{url:"/checktransactions",templateUrl:"partials/checktransactions-partial.html",controller:"checktransactionsController",controllerAs:"vm"}).state("viewexam",{url:"/exam/:examId",templateUrl:"partials/viewexam-partial.html",controller:"viewexamController",controllerAs:"vm"}).state("examreceipt",{url:"/exam/:examId/secret/:secret",templateUrl:"partials/examreceipt-partial.html",controller:"examreceiptController",controllerAs:"vm"}).state("newexam",{url:"/newexam",templateUrl:"partials/newexam-partial.html",controller:"newexamController",controllerAs:"vm"}).state("cashout",{url:"/cashout",templateUrl:"partials/cashout-partial.html",controller:"cashoutController",controllerAs:"vm"}).state("home",{url:"/",templateUrl:"partials/home-partial.html",controller:"HomeController",controllerAs:"vm"})}])}(exambae),function(e){e.constant("LCP","QA"),e.constant("HOSTNAME","https://demolisherapp.appspot.com")}(exambae),function(e){e.factory("bitcoinApiFactory",["$q","$http","HOSTNAME",function(e,o,t){function a(o){return console.log(o),e.resolve(o.data)}function n(o){return console.log(o),console.log("There was an error"),e.reject(o)}function l(e){var t="/transactions/"+e;return o.get(g+t).then(a,n)}function r(){return o.get("https://api.coinmarketcap.com/v1/ticker/dogecoin/").then(a,n)}function s(e){var t="https://blockchain.info/tobtc?currency=USD&value="+e;return o.get(t).then(a,n)}function c(e,l,r){var s=t+"/fuckyoupayme/"+e+"/secret/"+l+"/account/"+r;return o.get(s).then(a,n)}function i(e){var l=t+"/create_wallet/"+e;return o.get(l).then(a,n)}function d(e){var l=t+"/balance/"+e;return o.get(l).then(a,n)}function u(e,t){var l="https://chart.googleapis.com/chart?chs=225x225&chld=L|2&cht=qr&chl=dogecoin:"+e+"&amount="+t;return o.get(l).then(a,n)}var g=t;return{convertUSD2BTC:s,getTransactions:l,getDogecoinExchangeRate:r,getAddress:i,getQRCode:u,getBalance:d,cashout:c}}])}(exambae),function(e){e.factory("ExamFactory",["$q","$http","HOSTNAME",function(e,o,t){function a(o){return console.log(o),e.resolve(o.data)}function n(o){return console.log(o),console.log("There was an error"),e.reject(o)}function l(e){return h+"/blob/"+e}function r(e,t){var l=new FormData;return l.append("file",e),o.post(t,l,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(a,n)}function s(e){var t=h+"/blob/"+e;return o.delete(t).then(a,n)}function c(){var e=h+"/generate_blobstore_url";return o.get(e).then(a,n)}function i(e){var t="/exam/"+e;return o.get(h+t).then(a,n)}function d(e,t){var l="/exam/"+e+"/secret/"+t;return o.get(h+l).then(a,n)}function u(e){return o.post(h+"/exam",e).then(a,n)}function g(e){return o.post(h+"/pay_for_exam",e).then(a,n)}var m={getExam:i,getExamWithSecret:d,postExam:u,getUploadUrl:c,deleteBlob:s,createBlob:r,getBlobDownloadUrl:l,payForExam:g},h=t;return m}])}(exambae),function(e){e.factory("SearchFactory",["$q","$http","HOSTNAME",function(e,o,t){function a(o){return console.log(o),e.resolve(o.data)}function n(o){return console.log(o),console.log("There was an error"),e.reject(o)}function l(e){var t="/frontend/tag/"+e.display+"/get_resources";return o.get(u+t).then(a,n)}function r(){return o.get(u+"/frontend/get_tags").then(a,n)}function s(){return o.get(u+"/frontend/get_schools").then(a,n)}function c(e){var t="/frontend/school/"+e.display+"/get_classes";return o.get(u+t).then(a,n)}function i(e,t){var l="/frontend/school/"+e.display+"/school_class/"+t.display+"/get_resources";return o.get(u+l).then(a,n)}var d={getSchools:s,getClasses:c,getExams:i,getExamsByTag:l,getTags:r},u=t;return d}])}(exambae),function(e){e.controller("cashoutController",["$scope","$stateParams","ExamFactory","bitcoinApiFactory","$state",function(e,o,t,a,n){function l(){n.go("examreceipt",{examId:r.exam_id,secret:r.exam_secret})}console.log(o);var r=this;r.exam_id="",r.exam_secret="",r.account="",r.cashout=l}])}(exambae),function(e){e.controller("checktransactionsController",["$scope","bitcoinApiFactory",function(e,o){function t(){console.log("AYYYEEE"),o.getTransactions(n.clients_bitcoin_address).then(a)}function a(e){console.log(e),n.transactions=e}var n=this;n.form={},n.clients_bitcoin_address="",n.transactions=[{amount:"0.00471444",blob_key:"AMIfv95iMCCl38yRVONQoo7tHyCoThKr5r4Hjqog8wOthJAHfdaOGxng4ysEmU2q_HaYvR5mv0z4NpUvgVfAkJT7GI4AnfEI6XcjGTBupPo-ArEgFYyDeu-zGYNTWFLobXBIgBmbMljSPbMABpY4H8FEQSc5gfhIAa0Qqygr2uI9gdNwDYtiocIek8PsSUYM6pP2Dm9R7zNn-fF5emGa4_7l63FZOZb1l6TKTgF5LUzMWHo0p2aqGWFKlYRT3SrGKcSfP5P3Tn2quWFcB46mRnyO1zbFYtMjbBJLXQx4YBkhnTm-cs4yKzTn9YsAvx0pYyiMMwypCDpthooIgeYb7ZCRCukQoIImAQKId9o4lpgaVohxPHZXleqIw6vwBejVv9l9DC0fYcML",clients_bitcoin_address:"asdfasdfasdfasdf",exam_bitcoin_address:"213EED262E1574D2",state:"NOT CONFIRMED"},{amount:"0.00471444",blob_key:"AMIfv95iMCCl38yRVONQoo7tHyCoThKr5r4Hjqog8wOthJAHfdaOGxng4ysEmU2q_HaYvR5mv0z4NpUvgVfAkJT7GI4AnfEI6XcjGTBupPo-ArEgFYyDeu-zGYNTWFLobXBIgBmbMljSPbMABpY4H8FEQSc5gfhIAa0Qqygr2uI9gdNwDYtiocIek8PsSUYM6pP2Dm9R7zNn-fF5emGa4_7l63FZOZb1l6TKTgF5LUzMWHo0p2aqGWFKlYRT3SrGKcSfP5P3Tn2quWFcB46mRnyO1zbFYtMjbBJLXQx4YBkhnTm-cs4yKzTn9YsAvx0pYyiMMwypCDpthooIgeYb7ZCRCukQoIImAQKId9o4lpgaVohxPHZXleqIw6vwBejVv9l9DC0fYcML",clients_bitcoin_address:"asdfasdfasdfasdf",exam_bitcoin_address:"213EED262E1574D2",state:"CONFIRMED"}],n.submitBitcoinAddress=t}])}(exambae),function(e){e.controller("examreceiptController",["$scope","$stateParams","ExamFactory","bitcoinApiFactory",function(e,o,t,a){function n(e){i.exam=e,console.log(e),i.loading=!1,a.getBalance(i.exam.id).then(s)}function l(){i.cashout_process=!0,i.loading_cashout=!0,a.cashout(i.exam.id,i.exam.secret,i.doge_deposit_address).then(r)}function r(e){i.loading_cashout=!1,console.log(e),i.txn_id=e.txn_id}function s(e){i.balance=parseFloat(e.balance),console.log(e)}function c(e){console.log(e),console.log(e),console.log(e[0].price_usd),i.dogeExchangeRate=parseFloat(e[0].price_usd)}var i=this;i.txn_id="asdflkj;lkjasd;flkjasdf",i.doge_deposit_address="",i.loading=!0,i.balance=0,i.cashout=l,i.exam={},i.loading_cashout=!0,i.cashout_process=!1,a.getDogecoinExchangeRate().then(c),"secret"in o&&"examId"in o&&t.getExamWithSecret(o.examId,o.secret).then(n)}])}(exambae),function(e){e.controller("HeaderController",["$scope","$state","$rootScope",function(e,o,t){function a(e,o){e(o)}function n(){console.log("ayyyeee")}var l=this;l.state="home",l.toggleSidenav=n,l.openMenu=a,t.$on("$stateChangeSuccess",function(e,t,a,n,r){l.state=o.current.name})}])}(exambae),function(e){e.controller("HomeController",["$scope","SearchFactory","LCP","HOSTNAME",function(e,o,t,a){function n(e){_.loadingSchools=!1,console.log(e),console.log(_.loadingSchools),_.schools=e}function l(e){_.loadingClasses=!0,_.loadingExams=!0,_.schoolHasBeenSelected=!1,_.schoolClasses=[]}function r(e){_.selectedSchool=e,null==_.selectedSchool||""===_.selectedSchool?(_.schoolHasBeenSelected=!1,_.classHasBeenSelected=!1,_.selectedClass="",_.loadingClasses=!0,_.loadingExams=!0,_.schoolClasses=[]):(_.schoolHasBeenSelected=!0,o.getClasses(_.selectedSchool).then(c)),console.log("selection method"),console.log(_)}function s(e){return console.log(_.schools),e||""==e?_.schools.filter(b(e)):_.schools}function c(e){_.loadingClasses=!1,console.log(e),_.schoolClasses=e}function i(e){console.log(_.schoolClasses),_.classHasBeenSelected=!1,_.loadingExams=!0}function d(e){_.selectedClass=e,null===_.selectedClass||""===_.selectedClass?(_.classHasBeenSelected=!1,_.loadingExams=!0):(_.classHasBeenSelected=!0,o.getExams(_.selectedSchool,_.selectedClass).then(u))}function u(e){return _.loadingExams=!1,console.log(_.loadingExams),console.log(e),_.exams=e,e}function g(e){console.log(e);var o=e||""==e?_.schoolClasses.filter(b(e)):_.schoolClasses;return console.log("results"),console.log(o),o}function m(e){_.loadingTags=!1,console.log(e),console.log(_.loadingTags),_.tags=e}function h(e){_.loadingClasses=!0,_.loadingExams=!0,_.tagHasBeenSelected=!1}function f(e){_.selectedTag=e,console.log(e),null!=e&&o.getExamsByTag(e).then(u)}function p(e){return console.log(_.tags),e||""==e?_.tags.filter(b(e)):_.tags}function x(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}function b(e){var o=angular.lowercase(e);return function(e){return 0===e.value.indexOf(o)}}console.log(a),console.log(t);var _=this;_.loadingExams=!0,_.exams=[{school:"Georgia State University",number_of_downloads:0,description:"a;sldfkja;sldkfja;lsdkfja;sldfja;lsjdf;alsdjfalsdfj",tags:["tag","tagg2"],price:1,school_class:"class2040",id:"E031582AA222A086",professor:"Ayyyee",bitcoin_address:"DHrE8NTL7dNxm1dgFH9Pg4cxhhsRsPkgan",file:"D1CF5576FD79B53E",free_or_nah:!1},{school:"Georgia State University",number_of_downloads:0,description:"a;sldfkja;sldkfja;lsdkfja;sldfja;lsjdf;alsdjfalsdfj",tags:["tag","tagg2"],price:1,school_class:"class2040",id:"E031582AA222A086",professor:"Ayyyee",bitcoin_address:"DHrE8NTL7dNxm1dgFH9Pg4cxhhsRsPkgan",file:"D1CF5576FD79B53E",free_or_nah:!0}],_.not_true=!1,_.WTF="WTFF",_.loadingSchools=!0,_.schoolQueryNoResults=!0,_.isSchoolSearchDisabled=!1,_.isSchoolCacheDisabled=!1,_.schoolHasBeenSelected=!1,_.schools=[],o.getSchools().then(n),_.searchSchool=void 0,_.selectedSchool="",_.selectedSchoolChange=r,_.searchSchoolChange=l,_.schoolQuerySearch=s,_.loadingClasses=!0,_.isClassSearchDisabled=!1,_.isClassCacheDisabled=!0,_.classHasBeenSelected=!1,_.searchClass="",_.classQuerySearch=g,_.schoolClasses=[],_.selectedClass="",_.selectedClassChange=d,_.searchClassChange=i,_.loadingTags=!0,_.isTagSearchDisabled=!1,_.isTagCacheDisabled=!1,_.tagHasBeenSelected=!1,_.tags=[],o.getTags().then(m),_.searchTag="",_.selectedTag="",_.selectedTagChange=f,_.searchTagChange=h,_.tagQuerySearch=p,_.newState=x}])}(exambae),function(e){e.controller("newexamController",["$scope","ExamFactory","$state","HOSTNAME",function(e,o,t,a){function n(){var e=document.getElementById("file").files[0];o.createBlob(e,u.uploadUrl).then(l)}function l(e){u.exam.file=e.blob_key,u.fileUploaded=!0}function r(e){u.uploadUrlLoading=!1,u.uploadUrl=a+e,console.log(u.uploadUrl)}function s(){o.deleteBlob(u.exam.file),u.exam.file="",u.fileUploaded=!1}function c(){console.log("in this biihhhh"),u.exam.price===u.undefined||u.metaDataForm.$invalid||""==u.exam.file||""==u.exam.description?u.showFormErrors=!0:(u.exam.price>0&&(u.exam.free_or_nah=!1),o.postExam(u.exam).then(d))}function i(){console.log(u)}function d(e){"secret"in e&&"id"in e?t.go("examreceipt",{examId:e.id,secret:e.secret}):(console.log("WTFFF"),console.log(e))}var u=this;u.submitButton1="",u.submitButton2="",u.undefined=void 0,u.printScope=i,u.tagsReadonlyToggle=!1,u.tagsRemovable=!0,u.NO_FILE_UPLOADED="NO_FILES",u.FILE_UPLOADED="FILE",u.uploadButtonState=u.NO_FILE_UPLOADED,u.fileUploaded=!1,u.uploadUrlLoading=!0,u.uploadUrl=o.getUploadUrl().then(r),u.fileUploaded=!1,u.uploadFile=n,u.deleteFile=s,u.metaDataForm={},u.showFormErrors=!1,u.exam={},u.exam.school="",u.exam.school_class="",u.exam.professor="",u.exam.file="",u.exam.description="",u.exam.free_or_nah=!0,u.exam.price=0,u.exam.number_of_downloads=0,u.exam.tags=[],u.postExam=c}])}(exambae),function(e){e.controller("viewexamController",["$scope","$stateParams","ExamFactory","bitcoinApiFactory",function(e,o,t,a){function n(e){s.exam=e,console.log(e),s.loading=!1,s.downloadLink=t.getBlobDownloadUrl(s.exam.file),console.log(s.downloadLink),a.getDogecoinExchangeRate().then(r),a.getAddress(s.exam.id).then(l)}function l(e){s.address=e,s.exam.free_or_nah?s.qr_code_url="https://chart.googleapis.com/chart?chs=300x300&chld=L|2&cht=qr&chl=dogecoin:"+e+"&amount=1000":s.qr_code_url="https://chart.googleapis.com/chart?chs=300x300&chld=L|2&cht=qr&chl=dogecoin:"+e+"&amount="+s.priceInBTC}function r(e){console.log(e),console.log(e[0].price_usd),s.dogeExchangeRate=parseFloat(e[0].price_usd),s.exam.free_or_nah||(s.priceInBTC=parseFloat(s.exam.price)/s.dogeExchangeRate)}console.log(o);var s=this;s.loading=!0,s.form={},s.exam={},s.payment={},s.payment.amount=0,s.payment.exam_bitcoin_address="",s.payment.clients_bitcoin_address="",s.payment.blob_key="",s.dogeExchangeRate=0,s.priceInBTC=0,s.qr_code_url="",s.address="","examId"in o&&t.getExam(o.examId).then(n)}])}(exambae),function(e){e.directive("errorDirective",[function(){return{scope:{},controller:function(e,o,t,a){var n=Math.floor(2*Math.random()),l=Math.floor(7*Math.random());e.random=l,e.randomText=n},templateUrl:"partials/error-view-partial.html",link:function(e,o,t,a){}}}])}(exambae),function(e){e.directive("examDirective",[function(){return{scope:{exam:"="},controller:function(e,o,t,a){e.uploadFile=function(){console.log("uploading");e.blob}},templateUrl:"partials/exam-directive.html",replace:!0,link:function(e,o,t,a){}}}])}(exambae),function(e){e.directive("loadingDirective",[function(){return{scope:{},controller:function(e,o,t,a){var n=Math.floor(2*Math.random()),l=Math.floor(8*Math.random());e.random=l,e.randomText=n},templateUrl:"partials/loading-view-partial.html",link:function(e,o,t,a){}}}])}(exambae),function(e){function o(){function e(){}return{restrict:"E",templateUrl:"partials/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0}}e.directive("acmeNavbar",o)}(exambae),function(e){e.directive("successDirective",[function(){return{scope:{},controller:function(e,o,t,a){var n=Math.floor(2*Math.random()),l=Math.floor(7*Math.random());e.random=l,e.randomText=n},templateUrl:"partials/success-view-partial.html",link:function(e,o,t,a){}}}])}(exambae),function(e){e.directive("transactionDirective",["ExamFactory",function(e){return{scope:{transaction:"="},controller:function(o,t,a,n){console.log(o),o.downloadLink=e.getBlobDownloadUrl(o.transaction.blob_key)},templateUrl:"partials/transaction-directive.html",replace:!0,link:function(e,o,t,a){}}}])}(exambae);