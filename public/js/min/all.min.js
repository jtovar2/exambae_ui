var exambae=angular.module("exambae",["ngMaterial","ngAnimate","ngMessages","ngAria","ui.router"]);!function(e){e.config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/"),e.state("newexam",{url:"/newexam",templateUrl:"partials/newexam-partial.html",controller:"newexamController",controllerAs:"vm"}).state("home",{url:"/",templateUrl:"partials/home-partial.html",controller:"HomeController",controllerAs:"vm"})}])}(exambae),function(e){e.factory("ExamFactory",["$q","$http",function(e,o){function t(o){return console.log(o),e.resolve(o.data)}function l(o){return console.log(o),console.log("There was an error"),e.reject(o)}function a(e,a){var n=new FormData;return n.append("file",e),o.post(a,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(t,l)}function n(e){var a=u+"/blob/"+e;return o.delete(a).then(t,l)}function r(){var e=u+"/generate_blobstore_url";return o.get(e).then(t,l)}function s(e){var a="/exam/"+e;return o.get(u+a).then(t,l)}function c(e){console.log("WTFFF");return o.post(u+"/exam",e).then(t,l)}var i={getExam:s,postExam:c,getUploadUrl:r,deleteBlob:n,createBlob:a},u="http://demolisherapp.appspot.com";return i}])}(exambae),function(e){e.factory("SearchFactory",["$q","$http",function(e,o){function t(o){return console.log(o),e.resolve(o.data)}function l(o){return console.log(o),console.log("There was an error"),e.reject(o)}function a(){return o.get(c+"/frontend/get_schools").then(t,l)}function n(e){var a="/frontend/school/"+e.display+"/get_classes";return o.get(c+a).then(t,l)}function r(e,a){var n="/frontend/school/"+e.display+"/school_class/"+a.display+"/get_resources";return o.get(c+n).then(t,l)}var s={getSchools:a,getClasses:n,getExams:r},c="http://demolisherapp.appspot.com";return s}])}(exambae),function(e){e.controller("HeaderController",["$scope","$state","$rootScope",function(e,o,t){var l=this;l.state="home",t.$on("$stateChangeSuccess",function(e,t,a,n,r){l.state=o.current.name})}])}(exambae),function(e){e.controller("HomeController",["$scope","SearchFactory",function(e,o){function t(e){return m.loadingSchools=!1,console.log(e),console.log(m.loadingSchools),e}function l(e){m.loadingClasses=!0,m.loadingExams=!0,m.schoolHasBeenSelected=!1}function a(e){null==m.selectedSchool||""===m.selectedSchool?(m.schoolHasBeenSelected=!1,m.classHasBeenSelected=!1,m.selectedClass="",m.loadingClasses=!0,m.loadingExams=!0):(m.schoolHasBeenSelected=!0,m.schoolClasess=o.getClasses(m.selectedSchool).then(r)),console.log("selection method"),console.log(m)}function n(e){return e?m.schools.filter(h(e)):m.schools}function r(e){return m.loadingClasses=!1,console.log(e),e}function s(e){m.classHasBeenSelected=!1,m.loadingExams=!0}function c(e){null===m.selectedClass||""===m.selectedClass?(m.classHasBeenSelected=!1,m.loadingExams=!0):(m.classHasBeenSelected=!0,o.getExams(m.selectedSchool,m.selectedClass).then(i))}function i(e){return m.loadingExams=!1,console.log(m.loadingExams),console.log(e),m.exams=e,e}function u(e){return e?m.schoolClasess.filter(h(e)):m.schoolClasess}function d(e){alert("Sorry! You'll need to create a Constitution for "+e+" first!")}function h(e){var o=angular.lowercase(e);return function(e){return 0===e.value.indexOf(o)}}var m=this;m.loadingExams=!0,m.exams=[{description:"test1"}],m.loadingSchools=!0,m.isSchoolSearchDisabled=!1,m.isSchoolCacheDisabled=!1,m.schoolHasBeenSelected=!1,m.schools=o.getSchools().then(t),m.searchSchool="",m.selectedSchool="",m.selectedSchoolChange=a,m.searchSchoolChange=l,m.schoolQuerySearch=n,m.loadingClasses=!0,m.isClassSearchDisabled=!1,m.isClassCacheDisabled=!1,m.classHasBeenSelected=!1,m.searchClass="",m.classQuerySearch=u,m.schoolClasess=[],m.selectedClass="",m.selectedClassChange=c,m.searchClassChange=s,m.newState=d}])}(exambae),function(e){e.controller("newexamController",["$scope","ExamFactory",function(e,o){function t(){var e=document.getElementById("file").files[0];o.createBlob(e,s.uploadUrl).then(l)}function l(e){s.exam.file=e.blob_key,console.log(s.exam.file),s.fileUploaded=!0}function a(e){s.uploadUrlLoading=!1,console.log("upload urllzzzz"),console.log(e),s.uploadUrl=e,console.log("*********")}function n(){o.deleteBlob(s.exam.file),s.fileUploaded=!1}function r(){o.postExam(s.exam)}var s=this;s.NO_FILE_UPLOADED="NO_FILES",s.FILE_UPLOADED="FILE",s.uploadButtonState=s.NO_FILE_UPLOADED,s.fileUploaded=!1,s.uploadUrlLoading=!0,s.uploadUrl=o.getUploadUrl().then(a),s.fileUploaded=!1,s.uploadFile=t,s.deleteFile=n,s.metaDataForm={},s.exam={},s.exam.school="",s.exam.school_class="",s.exam.professor="",s.exam.file="",s.exam.description="",s.exam.free_or_nah=!0,s.exam.price=0,s.exam.number_of_downloads=0,s.exam.tags=[],s.postExam=r}])}(exambae),function(e){e.directive("errorDirective",[function(){return{scope:{},controller:function(e,o,t,l){var a=Math.floor(2*Math.random()),n=Math.floor(7*Math.random());e.random=n,e.randomText=a},templateUrl:"partials/error-view-partial.html",link:function(e,o,t,l){}}}])}(exambae),function(e){e.directive("examDirective",[function(){return{scope:{exam:"="},controller:function(e,o,t,l){e.uploadFile=function(){console.log("uploading");e.blob}},templateUrl:"partials/exam-directive.html",replace:!0,link:function(e,o,t,l){}}}])}(exambae),function(e){e.directive("loadingDirective",[function(){return{scope:{},controller:function(e,o,t,l){var a=Math.floor(2*Math.random()),n=Math.floor(8*Math.random());e.random=n,e.randomText=a},templateUrl:"partials/loading-view-partial.html",link:function(e,o,t,l){}}}])}(exambae),function(e){e.directive("successDirective",[function(){return{scope:{},controller:function(e,o,t,l){var a=Math.floor(2*Math.random()),n=Math.floor(7*Math.random());e.random=n,e.randomText=a},templateUrl:"partials/success-view-partial.html",link:function(e,o,t,l){}}}])}(exambae);